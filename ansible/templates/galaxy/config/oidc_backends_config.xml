<?xml version="1.0"?>
<!--

This file shall be properly set for user authentication and authorization leveraging the OpenID Connect protocol.
Here we provide a quick reference for configuration setters, and we provide a complete documentation
at the following page:

    https://galaxyproject.org/authnz/config/oidc/



Quick Reference
_______________

- provider:         Sets the name of OpenID Connect (OIDC) Identity Provider (IdP).
                    The following IdPs are currently supported:

                        { "Google", "Globus" }

- client id:        Sets the id of this client (i.e., your Galaxy instance) with the IdP, which is
                    obtained from the IdP at client registration.
                    See: https://tools.ietf.org/html/rfc6749#section-2.2

- client secret:    A secret generated by IdP for your client upon its registration.
                    See https://tools.ietf.org/html/rfc6749#section-2.3.1

- label:            A label to identify this IDP to users in the UI. Defaults to the provider name if absent.

- require_create_confirmation:            A boolean value that decides whether a NewUserConfirmation page shows up.


IMPORTANT NOTES
_______________

While registering your client (i.e., your Galaxy instance), you would need to provide the IdP with a
`redirect_uri`: a URL at which the IdP will callback your Galaxy instance upon a successful user authentication.

This URL for your Galaxy instance is composed as:

    <host_url>/authnz/<provider>/callback


Some examples:

- using localhost to authenticate with Google:
    http://localhost:8080/authnz/google/callback

- using localhost to authenticate with Globus:
    http://localhost:8080/authnz/globus/callback

- using an instance hosted at `https://usegalaxy.org` with Google:
    https://usegalaxy.org/authnz/google/callback


Please mind `http` and `https`.

-->
<OIDC>
    <provider name="Keycloak">
        <!-- The URL should include the base keycloak path as well as the realm -->
        <url>https://keycloak.example.org/realms/master/</url>
        <client_id> ... </client_id>
        <client_secret> ... </client_secret>
        <redirect_uri>http://localhost:8080/authnz/keycloak/callback</redirect_uri>
        <!-- (Optional): a provider label to display in the UI -->
        <!-- <label>My provider name</label> -->
        <!-- (Optional): whether to show a create account confirmation page -->
        <!-- <require_create_confirmation>false</require_create_confirmation> -->
        <!-- (Optional) Trusted CA certificate file or directory to use when verify Custos authorization server.
             See http://docs.python-requests.org/en/master/user/advanced/#ssl-cert-verification for more information. -->
        <!-- <ca_bundle>/path/to/ca_bundle</ca_bundle> -->
        <!-- (Optional) Override the default Custos well-known URL to point to a different instance -->
        <!-- <well_known_oidc_config_uri>https://.../.well-known/openid-configuration</well_known_oidc_config_uri> -->
        <!-- (Optional) Override the default idp hint -->
        <!-- <idphint>cilogon</idphint> -->
        <!-- (Optional) Enable logging out of the IDP when user logs out of Galaxy -->
        <!-- <enable_idp_logout>false</enable_idp_logout> -->
        <!-- <icon>https://path/to/icon</icon>  -->
        <!-- (Optional) Enable PKCE for this IDP -->
        <!-- <pkce_support>false</pkce_support> -->
        <!-- (Optional) the audiences accepted on the access-token for this IDP. -->
        <!-- <accepted_audiences>galaxy</accepted_audiences> -->

    </provider>

    <!-- Documentation: https://galaxyproject.org/authnz/config/oidc/idps/elixir-aai  -->
    <provider name="Elixir">
        <client_id>...</client_id>
        <client_secret>...</client_secret>
        <redirect_uri>http://localhost:8080/authnz/elixir/callback</redirect_uri>
        <prompt>consent</prompt>
        <icon>https://lifescience-ri.eu/fileadmin/lifescience-ri/media/Images/button-login-small.png</icon>
        <!-- (Optional) Extra scopes you need to request for your implementation -->
        <!-- <extra_scopes>offline_access,something-else</extra_scopes> -->
    </provider>

    <!-- Documentation: https://docs.egi.eu/providers/check-in/sp -->
    <provider name="egi_checkin">
	<!-- Client id and secret can be obtained by registering your client at EGI Check-in
	Federation Registry: https://aai.egi.eu/federation -->
        <client_id>...</client_id>
        <client_secret>...</client_secret>
	<redirect_uri>http://localhost:8080/authnz/checkin/callback</redirect_uri>
	<icon>https://im.egi.eu/im-dashboard/static/images/egicheckin.png</icon>
        <prompt>consent</prompt>
	<!-- (Optional) Which Check-in environment to use (prod, demo, dev), default is prod -->
	<!-- <checkin_env>dev</checkin_env> -->
    </provider>


</OIDC>
